<div class="py-12">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Bouton retour -->
    <div class="mb-6">
      <%= link_to sermons_path, class: "inline-flex items-center text-indigo-400 hover:text-indigo-300 transition-colors" do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Retour aux sermons
      <% end %>
    </div>

    <!-- Titre -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold text-white mb-4"><%= @sermon.title %></h1>
      <div class="flex items-center justify-center space-x-4 text-gray-300">
        <span class="flex items-center">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          <%= @sermon.speaker %>
        </span>
        <span class="flex items-center">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
          <%= @sermon.date.strftime("%d %B %Y") %>
        </span>
      </div>
    </div>

    <!-- Vidéo ou Image -->
    <% if @sermon.video_url.present? && (@sermon.video_url.include?('youtube.com') || @sermon.video_url.include?('youtu.be')) %>
      <% youtube_id = @sermon.video_url[/youtu\.be\/([\w-]+)/, 1] || @sermon.video_url[/v=([\w-]+)/, 1] %>
      <% if youtube_id %>
        <div class="mb-8 rounded-lg overflow-hidden shadow-xl">
          <div class="aspect-w-16 aspect-h-9 bg-gray-800">
            <iframe 
              src="https://www.youtube.com/embed/<%= youtube_id %>" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen
              class="w-full h-full">
            </iframe>
          </div>
        </div>
      <% end %>
    <% elsif @sermon.video.attached? %>
      <div class="mb-8 rounded-lg overflow-hidden shadow-xl">
        <video class="w-full" controls>
          <source src="<%= url_for(@sermon.video) %>" type="video/mp4">
          Votre navigateur ne supporte pas la lecture vidéo.
        </video>
      </div>
    <% end %>

    <!-- Audio -->
    <% if @sermon.audio.attached? %>
      <div class="mb-8 bg-gray-800 rounded-lg p-6 shadow-xl">
        <h2 class="text-xl font-semibold text-white mb-4">Écouter le sermon</h2>
        <audio controls class="w-full">
          <source src="<%= url_for(@sermon.audio) %>" type="audio/mpeg">
          Votre navigateur ne supporte pas la lecture audio.
        </audio>
      </div>
    <% end %>

    <!-- Description -->
    <div class="bg-gray-800 rounded-lg p-8 shadow-xl mb-8">
      <h2 class="text-2xl font-semibold text-white mb-4">Description</h2>
      <p class="text-gray-300 leading-relaxed whitespace-pre-line"><%= @sermon.description %></p>
    </div>

    <!-- Références bibliques -->
    <% if @sermon.scripture_references.present? %>
      <div class="bg-indigo-900 bg-opacity-50 rounded-lg p-6 shadow-xl">
        <h2 class="text-xl font-semibold text-white mb-3">Références bibliques</h2>
        <p class="text-indigo-200 italic"><%= @sermon.scripture_references %></p>
      </div>
    <% end %>

    <!-- Lien vidéo externe si présent -->
    <% if @sermon.video_url.present? && !(@sermon.video_url.include?('youtube.com') || @sermon.video_url.include?('youtu.be')) %>
      <div class="mt-8 text-center">
        <%= link_to @sermon.video_url, target: '_blank', rel: 'noopener noreferrer', class: "inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors" do %>
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
          </svg>
          Voir la vidéo
        <% end %>
      </div>
    <% end %>
  </div>
</div>

